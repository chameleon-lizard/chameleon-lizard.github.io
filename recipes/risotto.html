<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∏–∑–æ—Ç—Ç–æ —Å –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –†–µ—Ü–µ–ø—Ç</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Visualization & Content Choices:
        - –û–±–∑–æ—Ä –†–µ—Ü–µ–ø—Ç–∞ (–ù–∞–∑–≤–∞–Ω–∏–µ "–†–∏–∑–æ—Ç—Ç–æ —Å –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏", –û–ø–∏—Å–∞–Ω–∏–µ, –í—Ä–µ–º—è, –°–ª–æ–∂–Ω–æ—Å—Ç—å, –ü–æ—Ä—Ü–∏–∏): –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ HTML —Ç–µ–∫—Å—Ç —Å –∏–∫–æ–Ω–∫–∞–º–∏. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ: JS-—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø–æ—Ä—Ü–∏–π, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ cookie. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –ß–µ—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è.
        - –°–ø–∏—Å–æ–∫ –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ HTML —Å–ø–∏—Å–∫–∏ –¥–ª—è "–†–∏–∑–æ—Ç—Ç–æ —Å –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏". –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è —ç–º—É–ª—å—Å–∏–∏ –∏ —á–æ—Ä–∏–∑–æ —É–¥–∞–ª–µ–Ω—ã. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ: JS-—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞; –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ—Ä—Ü–∏–∏; –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ cookie. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –£–ª—É—á—à–µ–Ω–Ω–æ–µ —É–¥–æ–±—Å—Ç–≤–æ –¥–ª—è –ø–æ–∫—É–ø–æ–∫/–≥–æ—Ç–æ–≤–∫–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è.
        - –®–∞–≥–∏ –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è: –†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è/—Å–≤–æ—Ä–∞—á–∏–≤–∞—é—â–∏–µ—Å—è —Å–µ–∫—Ü–∏–∏ (–∞–∫–∫–æ—Ä–¥–µ–æ–Ω) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ "–†–∏–∑–æ—Ç—Ç–æ —Å –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏". –®–∞–≥–∏ –¥–ª—è —ç–º—É–ª—å—Å–∏–∏ –∏ —á–æ—Ä–∏–∑–æ —É–¥–∞–ª–µ–Ω—ã –∏ –Ω—É–º–µ—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –£–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π —à—É–º.
        - –°–æ–≤–µ—Ç—ã: –ö–Ω–æ–ø–∫–∏ –≤ –≤–∏–¥–µ —Å–µ—Ç–∫–∏ (—ç–º–æ–¥–∑–∏ + –Ω–∞–∑–≤–∞–Ω–∏–µ), –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Å –ø–æ–ª–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º —Å–æ–≤–µ—Ç–∞, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –¥–ª—è "–†–∏–∑–æ—Ç—Ç–æ —Å –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏". –°–æ–≤–µ—Ç –ø—Ä–æ —ç–º—É–ª—å—Å–∏—é —É–¥–∞–ª–µ–Ω. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≤–µ—Ç–æ–≤.
        - –ê–∫—Ç–∏–≤–Ω–∞—è –í–∫–ª–∞–¥–∫–∞: –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ cookie. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: –£–ª—É—á—à–µ–Ω–Ω—ã–π UX.
        - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –î–∞–Ω–Ω—ã—Ö: –°–ª–æ–∂–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.
        - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏/–ú–µ—Ç–æ–¥—ã: HTML, Tailwind CSS, Vanilla JavaScript, Browser Cookies.
        -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-button.active {
            border-color: #ea580c; /* orange-600 */
            color: #fb923c; /* orange-400 */
            font-weight: 600;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .custom-checkbox:checked + label:before {
            background-color: #ea580c; /* orange-600 */
            border-color: #ea580c; /* orange-600 */
        }
        .custom-checkbox:checked + label:after {
            content: '‚úî';
            position: absolute;
            left: 4px;
            top: -1px;
            color: #e2e8f0; /* slate-200 for checkmark on dark bg */
            font-size: 14px;
        }
        label:before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #475569; /* slate-600 */
            border-radius: 4px;
            margin-right: 10px;
            vertical-align: middle;
            position: relative;
            background-color: #334155; /* slate-700 */
        }
         label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out;
            opacity: 0;
        }
        .step-content.open {
            max-height: 1000px; 
            opacity: 1;
        }
        .step-header {
            cursor: pointer;
            background-color: #1e293b; /* slate-800, slightly darker than main container */
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            border: 1px solid #334155; /* slate-700 */
            transition: background-color 0.3s ease;
        }
        .step-header:hover {
            background-color: #334155; /* slate-700 */
        }
        .step-indicator {
            transition: transform 0.3s ease;
        }
        .step-header.active .step-indicator {
            transform: rotate(45deg);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            display: none; 
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        .modal-content {
            background-color: #1e293b; /* slate-800 */
            color: #e2e8f0; /* slate-200 */
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 500px;
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
            border: 1px solid #334155; /* slate-700 */
        }
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        .tip-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: #334155; /* slate-700 */
            border: 1px solid #475569; /* slate-600 */
            text-align: center;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            min-height: 120px; 
        }
        .tip-button:hover {
            background-color: #475569; /* slate-600 */
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .tip-button .emoji {
            font-size: 2rem; 
            margin-bottom: 0.5rem;
        }
        .tip-button .tip-title-short {
            font-weight: 600;
            font-size: 0.875rem; 
            color: #fb923c; /* orange-400 */
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 min-h-screen flex flex-col items-center py-8 px-4">

    <div class="container mx-auto max-w-3xl bg-slate-800 shadow-xl rounded-lg p-6 md:p-10">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-orange-400 mb-2">–†–∏–∑–æ—Ç—Ç–æ —Å –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏</h1>
            <p class="text-lg text-slate-400">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∫—É—Å –ò—Ç–∞–ª–∏–∏ —Å –∞—Ä–æ–º–∞—Ç–æ–º –º–æ—Ä—è</p>
        </header>

        <nav class="mb-8 border-b border-slate-700">
            <ul class="flex flex-wrap -mb-px justify-center">
                <li class="mr-2"><button data-tab="overview" class="tab-button active inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-orange-400 hover:border-orange-500">–û–±–∑–æ—Ä</button></li>
                <li class="mr-2"><button data-tab="ingredients" class="tab-button inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-orange-400 hover:border-orange-500">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</button></li>
                <li class="mr-2"><button data-tab="preparation" class="tab-button inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-orange-400 hover:border-orange-500">–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</button></li>
                <li><button data-tab="tips" class="tab-button inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-orange-400 hover:border-orange-500">–°–æ–≤–µ—Ç—ã</button></li>
            </ul>
        </nav>

        <main>
            <section id="overview" class="content-section active">
                <h2 class="text-2xl font-semibold text-orange-400 mb-4">–û–±–∑–æ—Ä –ë–ª—é–¥–∞</h2>
                <p class="mb-4 text-slate-300">–≠—Ç–æ –≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∏–∑–æ—Ç—Ç–æ —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ —Å–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ –Ω–µ–∂–Ω—É—é –∫—Ä–µ–º–æ–≤—É—é —Ç–µ–∫—Å—Ç—É—Ä—É —Ä–∏—Å–∞ –∏ –±–æ–≥–∞—Ç—ã–π –≤–∫—É—Å –¥–∞—Ä–æ–≤ –º–æ—Ä—è. –ü—Ä–æ—Å—Ç–æ–µ –≤ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏, –Ω–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∞—Ä–æ–º–∞—Ç–Ω–æ–µ –∏ —Å—ã—Ç–Ω–æ–µ –±–ª—é–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –∫–∞–∫ –¥–ª—è –±—É–¥–Ω–∏—á–Ω–æ–≥–æ —É–∂–∏–Ω–∞, —Ç–∞–∫ –∏ –¥–ª—è –æ—Å–æ–±–æ–≥–æ —Å–ª—É—á–∞—è. –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–ª—é–¥–µ –∏ —Å–º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π.</p>
                
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 text-center">
                    <div class="bg-slate-700 p-4 rounded-lg shadow">
                        <span class="text-3xl">‚è±Ô∏è</span>
                        <p class="font-semibold mt-1 text-slate-200">–í—Ä–µ–º—è:</p>
                        <p class="text-slate-300">–æ–∫–æ–ª–æ 45-50 –º–∏–Ω—É—Ç</p>
                    </div>
                    <div class="bg-slate-700 p-4 rounded-lg shadow">
                        <span class="text-3xl">üç≥</span>
                        <p class="font-semibold mt-1 text-slate-200">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</p>
                        <p class="text-slate-300">–°—Ä–µ–¥–Ω—è—è</p>
                    </div>
                    <div class="bg-slate-700 p-4 rounded-lg shadow">
                        <span class="text-3xl">üçΩÔ∏è</span>
                        <p class="font-semibold mt-1 text-slate-200">–ü–æ—Ä—Ü–∏–∏:</p>
                        <select id="servings" class="mt-1 block w-full p-2 border border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 bg-slate-700 text-slate-200">
                            <option value="1">1 –ø–æ—Ä—Ü–∏—è</option>
                            <option value="2" selected>2 –ø–æ—Ä—Ü–∏–∏</option>
                            <option value="3">3 –ø–æ—Ä—Ü–∏–∏</option>
                            <option value="4">4 –ø–æ—Ä—Ü–∏–∏</option>
                            <option value="6">6 –ø–æ—Ä—Ü–∏–π</option>
                        </select>
                    </div>
                </div>
            </section>

            <section id="ingredients" class="content-section">
                <h2 class="text-2xl font-semibold text-orange-400 mb-4">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h2>
                <p class="mb-6 text-slate-300">–ó–¥–µ—Å—å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ—Ä—Ü–∏–π –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±–∑–æ—Ä". –í–∞—à–∏ –æ—Ç–º–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–∑–∏—Ç–∞.</p>
                <div id="ingredient-list" class="space-y-6">
                </div>
            </section>

            <section id="preparation" class="content-section">
                <h2 class="text-2xl font-semibold text-orange-400 mb-4">–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</h2>
                <p class="mb-6 text-slate-300">–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º –ø–æ—à–∞–≥–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∏–∑–æ—Ç—Ç–æ —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —à–∞–≥, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏.</p>
                <div class="space-y-3" id="preparation-steps-accordion">
                    <div class="preparation-step">
                        <button class="step-header flex justify-between items-center w-full text-left text-xl font-semibold text-slate-200">
                            <span>1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤</span>
                            <span class="step-indicator text-orange-400 text-2xl font-light">+</span>
                        </button>
                        <div class="step-content">
                            <ul class="list-disc list-inside space-y-1 pl-4 text-slate-300 py-3">
                                <li>–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–æ—Ä–æ–∑—å—Ç–µ –∏—Ö. –û–±—Å—É—à–∏—Ç–µ –±—É–º–∞–∂–Ω—ã–º –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ–º.</li>
                                <li>–ö—Ä—É–ø–Ω—ã–µ –∫—Ä–µ–≤–µ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å, –æ—Å—Ç–∞–≤–∏–≤ —Ö–≤–æ—Å—Ç–∏–∫–∏ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã. –ì—Ä–µ–±–µ—à–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∂–µ—Å—Ç–∫–æ–π –±–æ–∫–æ–≤–æ–π –º—ã—à—Ü—ã –∏ —É–¥–∞–ª–∏—Ç–µ –µ–µ.</li>
                                <li>–ù–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ —Ä–∞–∑–æ–≥—Ä–µ–π—Ç–µ –æ–ª–∏–≤–∫–æ–≤–æ–µ –∏ –Ω–µ–º–Ω–æ–≥–æ —Å–ª–∏–≤–æ—á–Ω–æ–≥–æ –º–∞—Å–ª–∞. –ë—ã—Å—Ç—Ä–æ –æ–±–∂–∞—Ä—å—Ç–µ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥—Ä–µ–±–µ—à–∫–∏ –ø–æ 1-1,5 –º–∏–Ω—É—Ç—ã —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –∫—Ä–µ–≤–µ—Ç–∫–∏ –¥–æ —Ä–æ–∑–æ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞). –ù–µ –ø–µ—Ä–µ–¥–µ—Ä–∂–∏—Ç–µ, —á—Ç–æ–±—ã –æ–Ω–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Å–æ—á–Ω—ã–º–∏.</li>
                                <li>–ü–µ—Ä–µ–ª–æ–∂–∏—Ç–µ –æ–±–∂–∞—Ä–µ–Ω–Ω—ã–µ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã –Ω–∞ —Ç–∞—Ä–µ–ª–∫—É –∏ –æ—Ç—Å—Ç–∞–≤—å—Ç–µ –≤ —Å—Ç–æ—Ä–æ–Ω—É.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="preparation-step">
                        <button class="step-header flex justify-between items-center w-full text-left text-xl font-semibold text-slate-200">
                            <span>2. –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –†–∏–∑–æ—Ç—Ç–æ</span>
                            <span class="step-indicator text-orange-400 text-2xl font-light">+</span>
                        </button>
                        <div class="step-content">
                            <ul class="list-disc list-inside space-y-1 pl-4 text-slate-300 py-3">
                                <li>–í –±–æ–ª—å—à–æ–π –∫–∞—Å—Ç—Ä—é–ª–µ –∏–ª–∏ —Å–æ—Ç–µ–π–Ω–∏–∫–µ —Å —Ç–æ–ª—Å—Ç—ã–º –¥–Ω–æ–º —Ä–∞–∑–æ–≥—Ä–µ–π—Ç–µ –æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ –Ω–∞ —Å—Ä–µ–¥–Ω–µ–º –æ–≥–Ω–µ. –î–æ–±–∞–≤—å—Ç–µ –º–µ–ª–∫–æ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–π –ª—É–∫-—à–∞–ª–æ—Ç (–∏–ª–∏ —Ä–µ–ø—á–∞—Ç—ã–π –ª—É–∫) –∏ –ø–∞—Å—Å–µ—Ä—É–π—Ç–µ –¥–æ –º—è–≥–∫–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ (–æ–∫–æ–ª–æ 3-4 –º–∏–Ω—É—Ç).</li>
                                <li>–î–æ–±–∞–≤—å—Ç–µ —á–µ—Å–Ω–æ–∫ –∏ –≥–æ—Ç–æ–≤—å—Ç–µ –µ—â–µ 1 –º–∏–Ω—É—Ç—É –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –∞—Ä–æ–º–∞—Ç–∞.</li>
                                <li>–í—Å—ã–ø—å—Ç–µ —Ä–∏—Å –∏ –æ–±–∂–∞—Ä–∏–≤–∞–π—Ç–µ, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–º–µ—à–∏–≤–∞—è, –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç, –ø–æ–∫–∞ –∫—Ä–∞—è —Ä–∏—Å–∏–Ω–æ–∫ –Ω–µ —Å—Ç–∞–Ω—É—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏.</li>
                                <li>–í–ª–µ–π—Ç–µ –±–µ–ª–æ–µ –≤–∏–Ω–æ –∏ –≥–æ—Ç–æ–≤—å—Ç–µ, –ø–æ–º–µ—à–∏–≤–∞—è, –ø–æ–∫–∞ –æ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ –≤–ø–∏—Ç–∞–µ—Ç—Å—è.</li>
                                <li>–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —á–µ—Ä–Ω–∏–ª–∞ –∫–∞—Ä–∞–∫–∞—Ç–∏—Ü—ã –¥–ª—è —Ü–≤–µ—Ç–∞ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–æ—Ä—Å–∫–æ–≥–æ –≤–∫—É—Å–∞, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö —Å–µ–π—á–∞—Å –∏ —Ö–æ—Ä–æ—à–æ –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ.</li>
                                <li>–ù–∞—á–Ω–∏—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –≥–æ—Ä—è—á–∏–π –±—É–ª—å–æ–Ω (–æ–≤–æ—â–Ω–æ–π –∏–ª–∏ —Ä—ã–±–Ω—ã–π) –ø–æ –æ–¥–Ω–æ–º—É –ø–æ–ª–æ–≤–Ω–∏–∫—É –∑–∞ —Ä–∞–∑, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–æ–∂–∏–¥–∞—è—Å—å, –ø–æ–∫–∞ –∂–∏–¥–∫–æ—Å—Ç—å –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–ø–∏—Ç–∞–µ—Ç—Å—è, –ø—Ä–µ–∂–¥–µ —á–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Ä—Ü–∏—é. –ì–æ—Ç–æ–≤—å—Ç–µ, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–º–µ—à–∏–≤–∞—è, –æ–∫–æ–ª–æ 18-20 –º–∏–Ω—É—Ç, –∏–ª–∏ –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è "–∞–ª—å –¥–µ–Ω—Ç–µ" (—Ä–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º—è–≥–∫–∏–º —Å–Ω–∞—Ä—É–∂–∏, –Ω–æ —Å–ª–µ–≥–∫–∞ —Ç–≤–µ—Ä–¥—ã–º –≤ —Ü–µ–Ω—Ç—Ä–µ).</li>
                                <li>–ó–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä–∏—Å–∞ –≤–µ—Ä–Ω–∏—Ç–µ –æ–±–∂–∞—Ä–µ–Ω–Ω—ã–µ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã –≤ –∫–∞—Å—Ç—Ä—é–ª—é –∫ —Ä–∏—Å—É, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ –∏ –ø—Ä–æ–≥—Ä–µ–π—Ç–µ –≤—Å–µ –≤–º–µ—Å—Ç–µ.</li>
                                <li>–°–Ω–∏–º–∏—Ç–µ —Ä–∏–∑–æ—Ç—Ç–æ —Å –æ–≥–Ω—è. –î–æ–±–∞–≤—å—Ç–µ —Ö–æ–ª–æ–¥–Ω–æ–µ —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ –∏ —Ç–µ—Ä—Ç—ã–π –ø–∞—Ä–º–µ–∑–∞–Ω. –≠–Ω–µ—Ä–≥–∏—á–Ω–æ –ø–µ—Ä–µ–º–µ—à–∞–π—Ç–µ –¥–æ –∫—Ä–µ–º–æ–≤–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü–∏–∏ (—ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "–º–∞–Ω—Ç–µ–∫–∞—Ç—É—Ä–∞").</li>
                                <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞ –≤–∫—É—Å, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–æ–ª—å –∏ –ø–µ—Ä–µ—Ü. –ï—Å–ª–∏ —Ä–∏–∑–æ—Ç—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–ª–∏—à–∫–æ–º –≥—É—Å—Ç—ã–º, –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –≥–æ—Ä—è—á–µ–≥–æ –±—É–ª—å–æ–Ω–∞ –∏–ª–∏ –≤–æ–¥—ã.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="preparation-step">
                        <button class="step-header flex justify-between items-center w-full text-left text-xl font-semibold text-slate-200">
                            <span>3. –ü–æ–¥–∞—á–∞</span>
                            <span class="step-indicator text-orange-400 text-2xl font-light">+</span>
                        </button>
                        <div class="step-content">
                            <ul class="list-disc list-inside space-y-1 pl-4 text-slate-300 py-3">
                                <li>–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–∑–ª–æ–∂–∏—Ç–µ –≥–æ—Ä—è—á–µ–µ —Ä–∏–∑–æ—Ç—Ç–æ –ø–æ —Ç–∞—Ä–µ–ª–∫–∞–º.</li>
                                <li>–ü–æ –∂–µ–ª–∞–Ω–∏—é —É–∫—Ä–∞—Å—å—Ç–µ —Å–≤–µ–∂–µ–π –∑–µ–ª–µ–Ω—å—é (–ø–µ—Ç—Ä—É—à–∫–æ–π, —É–∫—Ä–æ–ø–æ–º) –∏ —Å–±—Ä—ã–∑–Ω–∏—Ç–µ –æ–ª–∏–≤–∫–æ–≤—ã–º –º–∞—Å–ª–æ–º.</li>
                                <li>–ü–æ–¥–∞–≤–∞–π—Ç–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –ø–æ–∫–∞ —Ä–∏–∑–æ—Ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ—é –∏–¥–µ–∞–ª—å–Ω—É—é —Ç–µ–∫—Å—Ç—É—Ä—É.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tips" class="content-section">
                <h2 class="text-2xl font-semibold text-orange-400 mb-4">–ü–æ–ª–µ–∑–Ω—ã–µ –°–æ–≤–µ—Ç—ã</h2>
                <p class="mb-6 text-slate-300">–≠—Ç–∏ —Å–æ–≤–µ—Ç—ã –ø–æ–º–æ–≥—É—Ç –≤–∞–º –¥–æ–±–∏—Ç—å—Å—è –Ω–∞–∏–ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —Å–æ–≤–µ—Ç, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏.</p>
                <div id="tips-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    </div>
            </section>
        </main>

        <footer class="mt-12 pt-6 border-t border-slate-700 text-center text-sm text-slate-500">
            <p>&copy; <span id="currentYear"></span> –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –†–µ—Ü–µ–ø—Ç. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞!</p>
        </footer>

    </div>

    <div id="tipModal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-xl font-semibold text-orange-400"></h3>
                <button id="closeModal" class="text-slate-400 hover:text-slate-200 text-2xl">&times;</button>
            </div>
            <p id="modalText" class="text-slate-300"></p>
        </div>
    </div>

    <script>
        const tabs = document.querySelectorAll('.tab-button');
        const contentSections = document.querySelectorAll('.content-section');
        const servingsSelect = document.getElementById('servings');
        const ingredientListContainer = document.getElementById('ingredient-list');
        const tipsGridContainer = document.getElementById('tips-grid');
        const modalOverlay = document.getElementById('tipModal');
        const modalTitleElem = document.getElementById('modalTitle');
        const modalTextElem = document.getElementById('modalText');
        const closeModalButton = document.getElementById('closeModal');

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        const baseServings = 2; 
        const cookieExpiryDays = 7; 

        const ingredientsData = [
            { 
                category: "–î–ª—è —Ä–∏–∑–æ—Ç—Ç–æ —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏",
                items: [
                    { name: "–†–∏—Å –ê—Ä–±–æ—Ä–∏–æ –∏–ª–∏ –ö–∞—Ä–Ω–∞—Ä–æ–ª–∏", baseAmount: 160, unit: "–≥" },
                    { name: "–ß–µ—Ä–Ω–∏–ª–∞ –∫–∞—Ä–∞–∫–∞—Ç–∏—Ü—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)", baseAmount: [1,2], unit: "–ø–∞–∫–µ—Ç–∏–∫–∞ (4-8 –≥)" , note: "–¥–ª—è —Ü–≤–µ—Ç–∞ –∏ –º–æ—Ä—Å–∫–æ–≥–æ –≤–∫—É—Å–∞" },
                    { name: "–û–≤–æ—â–Ω–æ–π –∏–ª–∏ —Ä—ã–±–Ω—ã–π –±—É–ª—å–æ–Ω", baseAmount: [700,800], unit: "–º–ª", note: "(–≥–æ—Ä—è—á–∏–π)" },
                    { name: "–ë–µ–ª–æ–µ —Å—É—Ö–æ–µ –≤–∏–Ω–æ", baseAmount: 100, unit: "–º–ª" },
                    { name: "–õ—É–∫-—à–∞–ª–æ—Ç –∏–ª–∏ —Ä–µ–ø—á–∞—Ç—ã–π –ª—É–∫", baseAmount: 1, unit: "—à—Ç.", note: "(–º–µ–ª–∫–æ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–π)" },
                    { name: "–ß–µ—Å–Ω–æ–∫", baseAmount: 1, unit: "–∑—É–±—á–∏–∫", note: "(–º–µ–ª–∫–æ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–π)" },
                    { name: "–û–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ", baseAmount: 2, unit: "—Å—Ç.–ª." },
                    { name: "–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ", baseAmount: 30, unit: "–≥", note: "(—Ö–æ–ª–æ–¥–Ω–æ–µ, –Ω–∞—Ä–µ–∑–∞–Ω–Ω–æ–µ –∫—É–±–∏–∫–∞–º–∏)" },
                    { name: "–°—ã—Ä –ü–∞—Ä–º–µ–∑–∞–Ω (–∏–ª–∏ –ì—Ä–∞–Ω–∞ –ü–∞–¥–∞–Ω–æ)", baseAmount: 30, unit: "–≥", note: "(—Ç–µ—Ä—Ç—ã–π)" },
                    { name: "–°–æ–ª—å, —Å–≤–µ–∂–µ–º–æ–ª–æ—Ç—ã–π —á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü", baseAmount: 0, unit: "", note: "–ø–æ –≤–∫—É—Å—É" }
                ]
            },
            {
                category: "–î–ª—è –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤",
                items: [
                    { name: "–ê—Å—Å–æ—Ä—Ç–∏ –∏–∑ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–æ–≤", baseAmount: [200,300], unit: "–≥", note: "(–∫—Ä–µ–≤–µ—Ç–∫–∏, –≥—Ä–µ–±–µ—à–∫–∏, –º–∏–¥–∏–∏, –∫–∞–ª—å–º–∞—Ä—ã)" },
                    { name: "–û–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ", baseAmount: 1, unit: "—Å—Ç.–ª.", note: "–¥–ª—è –æ–±–∂–∞—Ä–∫–∏" },
                    { name: "–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ", baseAmount: 0.5, unit: "—á.–ª.", note: "–¥–ª—è –æ–±–∂–∞—Ä–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)" }
                ]
            },
            {
                category: "–î–ª—è —É–∫—Ä–∞—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
                items: [
                    { name: "–°–≤–µ–∂–∞—è –ø–µ—Ç—Ä—É—à–∫–∞ –∏–ª–∏ —É–∫—Ä–æ–ø", baseAmount: 0, unit: "", note: "(–º–µ–ª–∫–æ –Ω–∞—Ä–µ–∑–∞–Ω–Ω–∞—è)" },
                    { name: "–î–æ–ª—å–∫–∞ –ª–∏–º–æ–Ω–∞", baseAmount: 0, unit: "", note: "–¥–ª—è –ø–æ–¥–∞—á–∏" }
                ]
            }
        ];

        const tipsData = [
            { emoji: "üåü", title: "–ö–∞—á–µ—Å—Ç–≤–æ", fullText: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∏—Å –¥–ª—è —Ä–∏–∑–æ—Ç—Ç–æ." },
            { emoji: "üî•", title: "–ë—É–ª—å–æ–Ω", fullText: "–í–∞–∂–Ω–æ, —á—Ç–æ–±—ã –±—É–ª—å–æ–Ω –±—ã–ª –≥–æ—Ä—è—á–∏–º –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ —Ä–∏—Å, —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ç–µ–∫—Å—Ç—É—Ä—É —Ä–∏–∑–æ—Ç—Ç–æ." },
            { emoji: "ü•Ñ", title: "–ü–æ–º–µ—à–∏–≤–∞–Ω–∏–µ", fullText: "–ü–æ–º–µ—à–∏–≤–∞–Ω–∏–µ —Ä–∏—Å–∞ –≤—ã—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –∫—Ä–∞—Ö–º–∞–ª, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∏–∑–æ—Ç—Ç–æ –∫—Ä–µ–º–æ–≤—ã–º." },
            { emoji: "‚ö´", title: "–ß–µ—Ä–Ω–∏–ª–∞", fullText: "–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —á–µ—Ä–Ω–∏–ª–∞ –∫–∞—Ä–∞–∫–∞—Ç–∏—Ü—ã, –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏—Ö –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, —á—Ç–æ–±—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–∞ –∏ –≤–∫—É—Å–∞. –û–Ω–∏ –∏–º–µ—é—Ç —Å–æ–ª–æ–Ω–æ–≤–∞—Ç—ã–π –º–æ—Ä—Å–∫–æ–π –ø—Ä–∏–≤–∫—É—Å." },
            { emoji: "üç§", title: "–ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã", fullText: "–ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã (–æ—Å–æ–±–µ–Ω–Ω–æ –≥—Ä–µ–±–µ—à–∫–∏ –∏ –∫—Ä–µ–≤–µ—Ç–∫–∏) –≥–æ—Ç–æ–≤—è—Ç—Å—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ. –ù–µ –ø–µ—Ä–µ–∂–∞—Ä—å—Ç–µ –∏—Ö, –∏–Ω–∞—á–µ –æ–Ω–∏ —Å—Ç–∞–Ω—É—Ç –∂–µ—Å—Ç–∫–∏–º–∏." }
        ];

        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Lax";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function formatAmount(amount, unit) {
            if (amount === 0 && unit === "") return "";
            if (Array.isArray(amount)) {
                return `${amount[0]}-${amount[1]} ${unit}`;
            }
            if (amount === 0.5) return `1/2 ${unit}`;
            if (amount === 0.25) return `1/4 ${unit}`;
            if (amount === 0.75) return `3/4 ${unit}`;
            return `${amount} ${unit}`;
        }
        
        function calculateAmount(baseAmount, multiplier) {
            if (baseAmount === 0) return 0;
            if (Array.isArray(baseAmount)) {
                return baseAmount.map(a => parseFloat((a * multiplier).toFixed(2)));
            }
            return parseFloat((baseAmount * multiplier).toFixed(2));
        }

        function renderIngredients() {
            const currentServings = parseInt(servingsSelect.value);
            const multiplier = currentServings / baseServings;
            ingredientListContainer.innerHTML = '';

            const checkedIngredientsCookie = getCookie("recipeCheckedIngredients");
            let checkedIngredients = [];
            if (checkedIngredientsCookie) {
                try {
                    checkedIngredients = JSON.parse(checkedIngredientsCookie);
                    if (!Array.isArray(checkedIngredients)) checkedIngredients = [];
                } catch (e) {
                    console.error("Error parsing checkedIngredients cookie:", e);
                    checkedIngredients = []; 
                }
            }

            ingredientsData.forEach((categoryObj, categoryIndex) => {
                const categoryDiv = document.createElement('div');
                const categoryTitle = document.createElement('h3');
                categoryTitle.className = 'text-xl font-semibold text-orange-400 mb-3'; 
                categoryTitle.textContent = categoryObj.category; // Make sure this is set
                categoryDiv.appendChild(categoryTitle);

                const ul = document.createElement('ul');
                ul.className = 'space-y-2';

                categoryObj.items.forEach((item, itemIndex) => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center';
                    
                    const checkboxId = `ingredient-cat${categoryIndex}-item${itemIndex}`;
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = checkboxId;
                    checkbox.className = 'custom-checkbox hidden'; 

                    if (checkedIngredients.includes(checkboxId)) {
                        checkbox.checked = true;
                    }

                    checkbox.addEventListener('change', () => {
                        let currentChecked = [];
                        const cookieVal = getCookie("recipeCheckedIngredients");
                        if (cookieVal) {
                            try {
                                currentChecked = JSON.parse(cookieVal);
                                if (!Array.isArray(currentChecked)) currentChecked = [];
                            } catch (e) { currentChecked = []; }
                        }
                        if (checkbox.checked) {
                            if (!currentChecked.includes(checkboxId)) {
                                currentChecked.push(checkboxId);
                            }
                        } else {
                            currentChecked = currentChecked.filter(id => id !== checkboxId);
                        }
                        setCookie("recipeCheckedIngredients", JSON.stringify(currentChecked), cookieExpiryDays);
                    });

                    const label = document.createElement('label');
                    label.htmlFor = checkboxId;
                    label.className = 'text-slate-300 flex-grow'; 

                    const calculatedAmount = calculateAmount(item.baseAmount, multiplier);
                    const amountText = formatAmount(calculatedAmount, item.unit);
                    
                    label.innerHTML = `<span class="font-medium text-slate-200">${item.name}</span>: ${amountText} <em class="text-sm text-slate-400">${item.note || ''}</em>`; 
                    
                    li.appendChild(checkbox);
                    li.appendChild(label);
                    ul.appendChild(li);
                });
                categoryDiv.appendChild(ul);
                ingredientListContainer.appendChild(categoryDiv);
            });
        }

        function handleTabClick(event) {
            const clickedTabButton = event.currentTarget;
            tabs.forEach(t => t.classList.remove('active'));
            clickedTabButton.classList.add('active');

            const targetTabId = clickedTabButton.getAttribute('data-tab');
            contentSections.forEach(section => {
                section.classList.remove('active');
                if (section.id === targetTabId) {
                    section.classList.add('active');
                }
            });
            setCookie("recipeActiveTab", targetTabId, cookieExpiryDays);

            if (targetTabId === 'ingredients') {
                renderIngredients(); 
            }
            if (targetTabId === 'tips') {
                renderTipsGrid();
            }
        }

        tabs.forEach(tab => {
            tab.addEventListener('click', handleTabClick);
        });

        servingsSelect.addEventListener('change', () => {
            setCookie("recipeSelectedServings", servingsSelect.value, cookieExpiryDays);
            if (document.querySelector('#ingredients.active')) {
                renderIngredients();
            }
        });
        
        function initializePreparationAccordion() {
            const accordionItems = document.querySelectorAll('#preparation-steps-accordion .preparation-step');
            accordionItems.forEach(item => {
                const header = item.querySelector('.step-header');
                const content = item.querySelector('.step-content');
                const indicator = header.querySelector('.step-indicator');

                header.addEventListener('click', () => {
                    const isOpen = content.classList.contains('open');
                    content.classList.toggle('open');
                    header.classList.toggle('active');
                    if (isOpen) {
                        indicator.textContent = '+';
                        indicator.classList.remove('rotate-45');
                    } else {
                        indicator.textContent = '+'; 
                        indicator.classList.add('rotate-45');
                    }
                });
            });
        }
        
        function renderTipsGrid() {
            tipsGridContainer.innerHTML = ''; 
            tipsData.forEach(tip => {
                const button = document.createElement('button');
                button.className = 'tip-button';
                button.innerHTML = `
                    <span class="emoji">${tip.emoji}</span>
                    <span class="tip-title-short">${tip.title}</span>
                `;
                button.addEventListener('click', () => {
                    modalTitleElem.textContent = tip.title;
                    modalTextElem.textContent = tip.fullText;
                    modalOverlay.classList.add('active');
                });
                tipsGridContainer.appendChild(button);
            });
        }

        closeModalButton.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
        });
        modalOverlay.addEventListener('click', (event) => {
            if (event.target === modalOverlay) { 
                modalOverlay.classList.remove('active');
            }
        });


        function initializeAppState() {
            const savedServings = getCookie("recipeSelectedServings");
            if (savedServings) {
                servingsSelect.value = savedServings;
            }

            const savedActiveTab = getCookie("recipeActiveTab");
            let activeTabIsTips = false;

            if (savedActiveTab) {
                tabs.forEach(t => t.classList.remove('active'));
                contentSections.forEach(s => s.classList.remove('active'));
                
                const tabButtonToActivate = document.querySelector(`.tab-button[data-tab="${savedActiveTab}"]`);
                const sectionToActivate = document.getElementById(savedActiveTab);

                if (tabButtonToActivate) tabButtonToActivate.classList.add('active');
                else document.querySelector('.tab-button[data-tab="overview"]').classList.add('active');

                if (sectionToActivate) sectionToActivate.classList.add('active');
                else document.getElementById('overview').classList.add('active');
                
                if(savedActiveTab === 'tips') activeTabIsTips = true;

            } else {
                document.querySelector('.tab-button[data-tab="overview"]').classList.add('active');
                document.getElementById('overview').classList.add('active');
            }
            
            if (document.querySelector('#ingredients.active')) {
                 renderIngredients();
            }
            if (activeTabIsTips || document.querySelector('#tips.active')) { 
                renderTipsGrid();
            }
            initializePreparationAccordion(); 
        }

        document.addEventListener('DOMContentLoaded', initializeAppState);

    </script>
</body>
</html>

